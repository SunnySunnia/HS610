Five components:  
-  
-**Inferencing method – How is the decision made?**    
1. Information retrieval	- Lab printouts.   
2. Logical expression evaluation - Evaluating the logical behind the events.  
3. Probabilistic and data-driven classification/prediction - being sensitive to things that might happen.  
4. Heuristic methods and expert systems - series of rules that trigger things/actions. Rule engine.   
5. Calculations, algorithms, and multistep processes	  
6. Associative grouping of elements  

A machine learning model will be built to produce the best solution for a patient’s TPN based on the patient’s current condition (from vitals, etc). This is to build a customized model for each patient that best serves his/her need.  
Accessing internal data. Then we can estimate a best combination of nutritions base on the neonatal population regarding their diagnosis/conditions/feedbacks. This is more preferable for effectiveness of machine learning purpose, but storing data triggers data security issues)    
Patient specific in terms of knowing the patient's past orders  

-**Knowledge base – What knowledge is used to make the decision? (interview doctors)**  
Subject matter experts are consulted  
EHR will be access  
Related medical conditions/symptoms/allergies, TPN effectiveness from neonatal population pool.  
        	
-**Information model – How is the input data represented?**	  
How the information is presented on screen (cognitive)          
	
 
-**Result specification – What is the output supposed to be?**            	
Output will be the suggested best solution- prescrition to the pharmacy.  
 
-**Application environment – How do you communicate with the user?**  

This caculator will be adapted when   
Values will be electronically taken from lab report, solution will be generated by the calculator. Then the prescription with the parameters will be printed and signed to pass to the pharmacy.  
The pharmacy will receive a fax of the prescription and manually input to their system after double check. The workflow for the pharmacist will remain the same. Only the method of generating the prescription based on the best solution is being changed.   
(User interface window where user will input patient information and calculate. Backend algorithms are executed once the user selects to calculate.)  
 
**Quality improvement**  
Measure quality/improvement to help clinician to better improve care.  
Improvement: difference from baseline.  Time, etc.  
Key performance indicator  
Patient satisfation  

**Interoperability**  
Analytics  
General mapping: ICD9 to ICD10  

**Operations**  
How much drug for inventory  
Supply-chain  


#TPN  
**integrate machine learning**  
- Identifying patients for whom the calculator will / will not work	 
- Improving the ability to determine solubility based on how clinicians override values	
- Timing user entry between fields and comparing with error rates to flag when an “inexperienced” user is identified	
http://clincalc.com/TPN/Macronutrients.aspx  
http://health.csusb.edu/dchen/368%20stuff/TPN%20calculation.htm  
http://clincalc.com/TPN/Macronutrients.aspx  
http://www.rxkinetics.com/tpnosmolcalc.html  
http://www.mc.vanderbilt.edu/documents/GSR/files/2013_IqbalJan9_TPN%20origin%20and%20calculations.pdf  
http://www.merckmanuals.com/professional/nutritional-disorders/nutritional-support/total-parenteral-nutrition-(tpn)  

#Algorithms： 
**clustering**  
- Given a bunch of data, can we identify a relationship between data element?  

**Classification**  
- Given a bunch of data, can we repicate a human expert in classifying a particular data element?  
- label the data with the expected result so that the lgorithm can "learn" the approriate pattern.  
- Support vector machines  
- random forests  
- logistic regression  
- Neural Networks  
- Deep Neural Networks  (graphical processing unit)  


#Evaluation of the algorithm:   
- Silhouette score (-1 ~ 1): -1 --> overlap between clusters; 0 --> random, ineffective; 1 --> strong good cluster.  
- Measures: snesitivity, specificity, precision, f-score-how good the overall system is.  
- Confusion Matrix: TP, TN, FP, FN  
- Multiclass confusion matrix: for each true category, what's the number of times that it has been predicted to be p1, p2, ...  
- -> p1, p2, ... = predicted categories.  
- ROC/AUC  
	ROC curve:
	for each cut point: 1, 0.9, 0.8, 0.7, 0.6, 0.5, .....  
	compute the TP-rate and FP-rate pair,  
	plot the TPR-FPR pairs.  
- sensitivity or true positive rate (TPR) eqv.recall  
	`TPR = TP/P = TP/(TP+FN)`
- specificity (SPC) or true negative rate  
	`SPC = TN/N = TN/(TN+FP)`   
- precision or positive predictive value (PPV)  
	`PPV = TP/(TP+FP)`  
```
PPV(TP+FP) = TP  
PPV*TP +PPV*FP = TP  
PPV*FP = TP - PPV*TP  
PPV*FP = TP (1-PPV) 
```

- accuracy (ACC)  
	ACC = (TP + TN) / (TP + FP + FN + TN)  

**Sensitivity, specificity, precision, etc:**  
- Test 99% sensitivity: given someone has the disease, there is 99% of time that the condition will catch that disease:  
	for all patient that have "HPP", 99% of the time will be caught be condition "low ALP"  
	P(lowALP|HPP) = 99%  
- Test 99% specificity: given someone doesnt have the disease, there is 1-99% chance that the patient will have the condition:  
	P(lowALP|!HPP) = 1-99%  




